!function(){"use strict";function e(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";e.textContent=t?n:r}function t(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";r.preventDefault();const o=r.submitter,s=o.textContent;e(o,!0,s,n),t().then((()=>r.target.reset())).catch(console.error).finally((()=>e(o,!1,s)))}function r(e,t,r){const n=e.querySelector(`#${t.id}-error`);n.textContent="",n.classList.remove(r.errorClass),t.classList.remove(r.inputErrorClass)}function n(e,t){0!==e.length&&(e.some((e=>!e.validity.valid))?o(t):function(e){e.disabled=!1}(t))}function o(e){e.disabled=!0}const s=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_getResult(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._getResult)}getUser(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._getResult)}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._getResult)}editUserAvatar(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._getResult)}postCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._getResult)}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._getResult)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._getResult)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._getResult)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"6a49bc73-4cbf-41b7-bd3f-9c47b1919869","Content-Type":"application/json"}}),a=document.querySelector(".profile"),c=a.querySelector(".profile__avatar"),i=a.querySelector(".profile__name"),l=a.querySelector(".profile__about"),d=a.querySelector("#profile-btn"),u=a.querySelector("#avatar-btn");function h(e){i.textContent=e.name,l.textContent=e.about}function m(e){c.src=e.avatar}function _(e,t,r){r?t.forEach((e=>{r[e.id]?e.value=r[e.id]:e.reset()})):e.reset()}function f(e){const t={};return e.forEach((e=>{t[e.id]=e.value})),t}let v;function y(e){"Escape"===e.key&&p(v)}function S(e){e.currentTarget===e.target&&p(v)}function b(e){v=e,e.classList.add("modal_opened"),document.addEventListener("keydown",y)}function p(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",y)}d.addEventListener("click",(function(){_(E,C,{name:i.textContent,about:l.textContent}),b(q)})),u.addEventListener("click",(function(){b(L)})),s.getUser().then((function(e){h(e),m(e)})).catch(console.error),Array.from(document.querySelectorAll(".modal")).forEach((e=>{e.addEventListener("mousedown",S),e.querySelector(".modal__exit-btn").addEventListener("click",(()=>p(e)))}));const q=document.querySelector("#profile-modal"),E=document.forms["profile-form"],g=q.querySelector(".modal__button"),C=q.querySelectorAll(".modal__input");E.addEventListener("submit",(function(e){t((function(){return s.editUserInfo(f(C)).then((e=>{h(e),o(g),p(q)}))}),e)}));const L=document.querySelector("#avatar-modal"),k=document.forms["avatar-form"],U=L.querySelector(".modal__button"),A=L.querySelectorAll(".modal__input");k.addEventListener("submit",(function(e){t((function(){return s.editUserAvatar(f(A)).then((e=>{m(e),_(k,A),o(U),p(L)}))}),e)}));const $=document.querySelector("#post-modal"),x=document.forms["post-form"],R=$.querySelectorAll(".modal__input");let T,P;x.addEventListener("submit",(function(e){t((function(){return s.postCard(f(R)).then((e=>{z(e),p($),_(x,R)}))}),e)})),document.querySelector(".profile__post-btn").addEventListener("click",(()=>b($)));const w=document.querySelector("#delete-modal"),D=document.forms["delete-form"],I=w.querySelector("#cancel-btn");D.addEventListener("submit",(function(e){t((function(){return s.removeCard(P).then((()=>{T.remove(),p(w)}))}),e,"Deleting...")})),I.addEventListener("click",(()=>p(w)));const N=document.querySelector("#image-modal"),O=N.querySelector(".modal__image"),j=N.querySelectorAll(".modal__caption"),B="#card-template";function J(e,t){!0===t?e.classList.add("card__like-icon_selected"):e.classList.remove("card__like-icon_selected")}const H=document.querySelector(".card-container");function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const r=function(e,t){const r=e.name,n=e.link,o=e._id;let a=e.isLiked;const c=document.querySelector(t).content.querySelector(".card").cloneNode(!0);c.querySelector(".card__text").textContent=r;const i=c.querySelector(".card__image");i.src=n,i.alt=r,i.addEventListener("click",(()=>{!function(e){O.src=e.link,O.alt=e.name,j.textContent=e.name}(e),b(N)}));const l=c.querySelector(".card__like-icon");return J(l,a),l.addEventListener("click",(()=>{a?(J(l,!1),s.dislikeCard(o).then((()=>{a=!1})).catch(console.error).finally((()=>{J(l,a)}))):(J(l,!0),s.likeCard(o).then((()=>{a=!0})).catch(console.error).finally((()=>{J(l,a)})))})),c.querySelector(".card__trash-icon").addEventListener("click",(()=>{T=c,P=o,b(w)})),c}(e,B);H[t](r)}var M;s.getInitialCards().then((e=>e.forEach((e=>z(e))))).catch(console.error),M={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(M.formSelector)).forEach((e=>{!function(e,t){const o=Array.from(e.querySelectorAll(t.inputSelector)),s=e.querySelector(t.submitButtonSelector);n(o,s),o.forEach((a=>{a.addEventListener("input",(()=>{!function(e,t,n){t.validity.valid?r(e,t,n):function(e,t,r,n){const o=e.querySelector(`#${t.id}-error`);o.textContent=r,o.classList.add(n.errorClass),t.classList.add(n.inputErrorClass)}(e,t,t.validationMessage,n)}(e,a,t),n(o,s)}))})),e.addEventListener("reset",(()=>{!function(e,t){Array.from(e.querySelectorAll(t.inputSelector)).forEach((n=>{r(e,n,t)}))}(e,t)}))}(e,M)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUMsRUFBT0MsR0FwQmhDLFNBQXdCRixFQUFNQyxFQUFPOEgsRUFBYzdILEdBQ2pELE1BQU1DLEVBQWVILEVBQUtJLGNBQWMsSUFBSUgsRUFBTUksWUFFbERGLEVBQWFuQixZQUFjK0ksRUFDM0I1SCxFQUFhRyxVQUFVc0UsSUFBSTFFLEVBQU9NLFlBRWxDUCxFQUFNSyxVQUFVc0UsSUFBSTFFLEVBQU9PLGdCQUM3QixDQWVJdUgsQ0FBZWhJLEVBQU1DLEVBQU9BLEVBQU1nSSxrQkFBbUIvSCxFQUV6RCxDQXdDTWdJLENBQW1CbEksRUFBTUMsRUFBT0MsR0FDaENRLEVBQWtCQyxFQUFRbEMsRUFBTyxHQUNqQyxJQUdKdUIsRUFBSzZFLGlCQUFpQixTQUFTLE1BM0NqQyxTQUE2QjdFLEVBQU1FLEdBQ2xCaUYsTUFBTUMsS0FBS3BGLEVBQUtxRixpQkFBaUJuRixFQUFPMEgsZ0JBRWhEM0QsU0FBU2hFLElBQ2RGLEVBQWVDLEVBQU1DLEVBQU9DLEVBQU8sR0FFdkMsQ0FzQ0lpSSxDQUFvQm5JLEVBQU1FLEVBQU8sR0FFckMsQ0FLSWtJLENBQWtCcEksRUFBTUUsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0Ly4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0Ly4vc3JjL3NjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhcbiAgYnV0dG9uLFxuICBpc0xvYWRpbmcsXG4gIGJ1dHRvblRleHQgPSBcIlNhdmVcIixcbiAgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiXG4pIHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChyZXF1ZXN0LCBldnQsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xuICBjb25zdCBpbml0aWFsVGV4dCA9IHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcblxuICByZW5kZXJMb2FkaW5nKHN1Ym1pdEJ1dHRvbiwgdHJ1ZSwgaW5pdGlhbFRleHQsIGxvYWRpbmdUZXh0KTtcbiAgcmVxdWVzdCgpXG4gICAgLnRoZW4oKCkgPT4gZXZ0LnRhcmdldC5yZXNldCgpKVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHJlbmRlckxvYWRpbmcoc3VibWl0QnV0dG9uLCBmYWxzZSwgaW5pdGlhbFRleHQpKTtcbn1cbiIsImZ1bmN0aW9uIHNob3dJbnB1dEVycm9yKGZvcm0sIGlucHV0LCBlcnJvck1lc3NhZ2UsIGNvbmZpZykge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xuXG4gIGlucHV0LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIGhpZGVJbnB1dEVycm9yKGZvcm0sIGlucHV0LCBjb25maWcpIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcblxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XG5cbiAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm0sIGlucHV0LCBjb25maWcpIHtcbiAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXQsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybSwgaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhpZGVGb3JtSW5wdXRFcnJvcnMoZm9ybSwgY29uZmlnKSB7XG4gIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG5cbiAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dHMsIGJ1dHRvbikge1xuICBpZiAoaW5wdXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gIGNvbnN0IG5vdFZhbGlkID0gaW5wdXRzLnNvbWUoKGlucHV0KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG5cbiAgaWYgKG5vdFZhbGlkKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b24pO1xuICB9IGVsc2Uge1xuICAgIGVuYWJsZUJ1dHRvbihidXR0b24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuYWJsZUJ1dHRvbihidXR0b24pIHtcbiAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlQnV0dG9uKGJ1dHRvbikge1xuICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBzZXRFdmVudExpc3RlbmVycyhmb3JtLCBjb25maWcpIHtcbiAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRzLCBidXR0b24pO1xuXG4gIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybSwgaW5wdXQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dHMsIGJ1dHRvbik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcbiAgICBoaWRlRm9ybUlucHV0RXJyb3JzKGZvcm0sIGNvbmZpZyk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihjb25maWcpIHtcbiAgY29uc3QgZm9ybXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybSwgY29uZmlnKTtcbiAgfSk7XG59XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlU3VibWl0IH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIGRpc2FibGVCdXR0b24gfSBmcm9tIFwiLi92YWxpZGF0aW9uLmpzXCI7XG5cbi8vIEFwaVxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNmE0OWJjNzMtNGNiZi00MWI3LWJkM2YtOWM0N2IxOTE5ODY5XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8gUHJvZmlsZVxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcbmNvbnN0IGF2YXRhciA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBuYW1lID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBhYm91dCA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hYm91dFwiKTtcbmNvbnN0IGVkaXRCdG4gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1idG5cIik7XG5jb25zdCBhdmF0YXJCdG4gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWJ0blwiKTtcblxuZnVuY3Rpb24gc2V0RGF0YShkYXRhKSB7XG4gIHNldEluZm8oZGF0YSk7XG4gIHNldEF2YXRhcihkYXRhKTtcbn1cblxuZnVuY3Rpb24gc2V0SW5mbyhkYXRhKSB7XG4gIG5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIGFib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbn1cblxuZnVuY3Rpb24gc2V0QXZhdGFyKGRhdGEpIHtcbiAgYXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyO1xufVxuXG5mdW5jdGlvbiBvbkluZm9FZGl0KCkge1xuICBzZXRJbnB1dFZhbHVlcyhwcm9maWxlRm9ybSwgcHJvZmlsZUlucHV0TGlzdCwge1xuICAgIG5hbWU6IG5hbWUudGV4dENvbnRlbnQsXG4gICAgYWJvdXQ6IGFib3V0LnRleHRDb250ZW50LFxuICB9KTtcbiAgb3Blbk1vZGFsKHByb2ZpbGVNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIG9uQXZhdGFyRWRpdCgpIHtcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn1cblxuZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25JbmZvRWRpdCk7XG5hdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uQXZhdGFyRWRpdCk7XG5cbmFwaS5nZXRVc2VyKCkudGhlbihzZXREYXRhKS5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy8gRm9ybVxuZnVuY3Rpb24gc2V0SW5wdXRWYWx1ZXMoZm9ybSwgaW5wdXRMaXN0LCBpbnB1dFZhbHVlcykge1xuICBpZiAoaW5wdXRWYWx1ZXMpIHtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlmIChpbnB1dFZhbHVlc1tpbnB1dC5pZF0pIHtcbiAgICAgICAgaW5wdXQudmFsdWUgPSBpbnB1dFZhbHVlc1tpbnB1dC5pZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dC5yZXNldCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGZvcm0ucmVzZXQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRJbnB1dFZhbHVlcyhpbnB1dExpc3QpIHtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaW5wdXRWYWx1ZXNbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XG4gIH0pO1xuXG4gIHJldHVybiBpbnB1dFZhbHVlcztcbn1cblxuLy8gTW9kYWxcbmxldCBjdXJyZW50TW9kYWw7XG5cbmZ1bmN0aW9uIGhhbmRlbEVzY2FwZShldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjbG9zZU1vZGFsKGN1cnJlbnRNb2RhbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGVsT3V0c2lkZUNsaWNrKGV2dCkge1xuICBpZiAoZXZ0LmN1cnJlbnRUYXJnZXQgPT09IGV2dC50YXJnZXQpIHtcbiAgICBjbG9zZU1vZGFsKGN1cnJlbnRNb2RhbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIGN1cnJlbnRNb2RhbCA9IG1vZGFsO1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kZWxFc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRlbEVzY2FwZSk7XG59XG5cbmNvbnN0IG1vZGFscyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKSk7XG5tb2RhbHMuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kZWxPdXRzaWRlQ2xpY2spO1xuXG4gIGNvbnN0IGV4aXRCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19leGl0LWJ0blwiKTtcbiAgZXhpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChtb2RhbCkpO1xufSk7XG5cbi8vIFByb2ZpbGUgTW9kYWxcbmNvbnN0IHByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XG5jb25zdCBwcm9maWxlU3VibWl0QnRuID0gcHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVJbnB1dExpc3QgPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG5cbmZ1bmN0aW9uIG9uUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xuICAgIHJldHVybiBhcGkuZWRpdFVzZXJJbmZvKGdldElucHV0VmFsdWVzKHByb2ZpbGVJbnB1dExpc3QpKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBzZXRJbmZvKGRhdGEpO1xuICAgICAgZGlzYWJsZUJ1dHRvbihwcm9maWxlU3VibWl0QnRuKTtcbiAgICAgIGNsb3NlTW9kYWwocHJvZmlsZU1vZGFsKTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgZXZ0KTtcbn1cblxucHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBvblByb2ZpbGVGb3JtU3VibWl0KTtcblxuLy8gQXZhdGFyIE1vZGFsXG5jb25zdCBhdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpO1xuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYXZhdGFyLWZvcm1cIl07XG5jb25zdCBhdmF0YXJTdWJtaXRCdG4gPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5jb25zdCBhdmF0YXJJbnB1dExpc3QgPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcblxuZnVuY3Rpb24gb25BdmF0YXJGb3JtU3VibWl0KGV2dCkge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLmVkaXRVc2VyQXZhdGFyKGdldElucHV0VmFsdWVzKGF2YXRhcklucHV0TGlzdCkpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHNldEF2YXRhcihkYXRhKTtcbiAgICAgIHNldElucHV0VmFsdWVzKGF2YXRhckZvcm0sIGF2YXRhcklucHV0TGlzdCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKGF2YXRhclN1Ym1pdEJ0bik7XG4gICAgICBjbG9zZU1vZGFsKGF2YXRhck1vZGFsKTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgZXZ0KTtcbn1cblxuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIG9uQXZhdGFyRm9ybVN1Ym1pdCk7XG5cbi8vIFBvc3QgTW9kYWxcbmNvbnN0IHBvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9zdC1tb2RhbFwiKTtcbmNvbnN0IHBvc3RGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwb3N0LWZvcm1cIl07XG5jb25zdCBwb3N0SW5wdXRMaXN0ID0gcG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuXG5mdW5jdGlvbiBvblBvc3RGb3JtU3VibWl0KGV2dCkge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLnBvc3RDYXJkKGdldElucHV0VmFsdWVzKHBvc3RJbnB1dExpc3QpKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKGRhdGEpO1xuICAgICAgY2xvc2VNb2RhbChwb3N0TW9kYWwpO1xuICAgICAgc2V0SW5wdXRWYWx1ZXMocG9zdEZvcm0sIHBvc3RJbnB1dExpc3QpO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBldnQpO1xufVxuXG5wb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIG9uUG9zdEZvcm1TdWJtaXQpO1xuXG5jb25zdCBwb3N0QWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wb3N0LWJ0blwiKTtcbnBvc3RBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG9wZW5Nb2RhbChwb3N0TW9kYWwpKTtcblxuLy8gRGVsZXRlIE1vZGFsXG5sZXQgY3VycmVudENhcmQ7XG5sZXQgY3VycmVudENhcmRJZDtcblxuY29uc3QgZGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcbmNvbnN0IGRlbGV0ZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImRlbGV0ZS1mb3JtXCJdO1xuY29uc3QgY2FuY2VsQnRuID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihgI2NhbmNlbC1idG5gKTtcblxuZnVuY3Rpb24gb25EZWxldGVDYXJkKGV2dCkge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpLnJlbW92ZUNhcmQoY3VycmVudENhcmRJZCkudGhlbigoKSA9PiB7XG4gICAgICBjdXJyZW50Q2FyZC5yZW1vdmUoKTtcbiAgICAgIGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBldnQsIFwiRGVsZXRpbmcuLi5cIik7XG59XG5cbmRlbGV0ZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBvbkRlbGV0ZUNhcmQpO1xuY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKSk7XG5cbi8vIEltYWdlIE1vZGFsXG5jb25zdCBpbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcbmNvbnN0IGltYWdlID0gaW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKGAubW9kYWxfX2ltYWdlYCk7XG5jb25zdCBjYXB0aW9uID0gaW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yQWxsKGAubW9kYWxfX2NhcHRpb25gKTtcblxuZnVuY3Rpb24gbG9hZE1vZGFsSW1hZ2UoZGF0YSkge1xuICBpbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gIGltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbn1cblxuLy8gQ2FyZFxuY29uc3QgY2FyZFRlbXBsYXRlID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuXG5mdW5jdGlvbiBnZXRDYXJkVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlQ2FyZExpa2UobGlrZUJ0biwgaXNMaWtlZCkge1xuICBpZiAoaXNMaWtlZCA9PT0gdHJ1ZSkge1xuICAgIGxpa2VCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtaWNvbl9zZWxlY3RlZFwiKTtcbiAgfSBlbHNlIHtcbiAgICBsaWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWljb25fc2VsZWN0ZWRcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhLCBzZWxlY3Rvcikge1xuICBjb25zdCBjYXJkTmFtZSA9IGRhdGEubmFtZTtcbiAgY29uc3QgY2FyZExpbmsgPSBkYXRhLmxpbms7XG4gIGNvbnN0IGNhcmRJZCA9IGRhdGEuX2lkO1xuICBsZXQgaXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcblxuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBjb25zdCBlbGVtZW50ID0gZ2V0Q2FyZFRlbXBsYXRlKHRlbXBsYXRlKTtcblxuICBjb25zdCBjYXJkVGV4dCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZXh0XCIpO1xuICBjYXJkVGV4dC50ZXh0Q29udGVudCA9IGNhcmROYW1lO1xuXG4gIGNvbnN0IGNhcmRJbWFnZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY2FyZEltYWdlLnNyYyA9IGNhcmRMaW5rO1xuICBjYXJkSW1hZ2UuYWx0ID0gY2FyZE5hbWU7XG5cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgbG9hZE1vZGFsSW1hZ2UoZGF0YSk7XG4gICAgb3Blbk1vZGFsKGltYWdlTW9kYWwpO1xuICB9KTtcblxuICBjb25zdCBsaWtlQnRuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtaWNvblwiKTtcbiAgZW5hYmxlQ2FyZExpa2UobGlrZUJ0biwgaXNMaWtlZCk7XG5cbiAgbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIC8vIFdpbGwgcmV2ZXJ0IHRoZSBsaWtlcyBhcHBlcmFuY2UgaWYgaXQgd2Fzbid0IGFibGUgdG8gc2VuZCB0byB0aGUgc2VydmVyXG4gICAgaWYgKGlzTGlrZWQpIHtcbiAgICAgIGVuYWJsZUNhcmRMaWtlKGxpa2VCdG4sIGZhbHNlKTtcbiAgICAgIGFwaVxuICAgICAgICAuZGlzbGlrZUNhcmQoY2FyZElkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgaXNMaWtlZCA9IGZhbHNlO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIGVuYWJsZUNhcmRMaWtlKGxpa2VCdG4sIGlzTGlrZWQpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5hYmxlQ2FyZExpa2UobGlrZUJ0biwgdHJ1ZSk7XG4gICAgICBhcGlcbiAgICAgICAgLmxpa2VDYXJkKGNhcmRJZClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlzTGlrZWQgPSB0cnVlO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIGVuYWJsZUNhcmRMaWtlKGxpa2VCdG4sIGlzTGlrZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHRyYXNoQnRuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWljb25cIik7XG5cbiAgdHJhc2hCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjdXJyZW50Q2FyZCA9IGVsZW1lbnQ7XG4gICAgY3VycmVudENhcmRJZCA9IGNhcmRJZDtcbiAgICBvcGVuTW9kYWwoZGVsZXRlTW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLy8gQ2FyZCBDb250YWluZXJcbmNvbnN0IGNhcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtY29udGFpbmVyXCIpO1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEsIG1ldGhvZCA9IFwicHJlcGVuZFwiKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhLCBjYXJkVGVtcGxhdGUpO1xuICBjYXJkQ29udGFpbmVyW21ldGhvZF0oY2FyZEVsZW1lbnQpO1xufVxuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkcykgPT4gY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4gcmVuZGVyQ2FyZChjYXJkKSkpXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy8gVmFsaWRhdGlvblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgX2dldFJlc3VsdChyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KS50aGVuKFxuICAgICAgdGhpcy5fZ2V0UmVzdWx0XG4gICAgKTtcbiAgfVxuXG4gIGdldFVzZXIoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pLnRoZW4oXG4gICAgICB0aGlzLl9nZXRSZXN1bHRcbiAgICApO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2dldFJlc3VsdCk7XG4gIH1cblxuICBlZGl0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9nZXRSZXN1bHQpO1xuICB9XG5cbiAgcG9zdENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fZ2V0UmVzdWx0KTtcbiAgfVxuXG4gIHJlbW92ZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fZ2V0UmVzdWx0KTtcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2dldFJlc3VsdCk7XG4gIH1cblxuICBkaXNsaWtlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9nZXRSZXN1bHQpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiJdLCJuYW1lcyI6WyJyZW5kZXJMb2FkaW5nIiwiYnV0dG9uIiwiaXNMb2FkaW5nIiwiYnV0dG9uVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImxvYWRpbmdUZXh0IiwidGV4dENvbnRlbnQiLCJoYW5kbGVTdWJtaXQiLCJyZXF1ZXN0IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJzdWJtaXRCdXR0b24iLCJzdWJtaXR0ZXIiLCJpbml0aWFsVGV4dCIsInRoZW4iLCJ0YXJnZXQiLCJyZXNldCIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsImhpZGVJbnB1dEVycm9yIiwiZm9ybSIsImlucHV0IiwiY29uZmlnIiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRzIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVCdXR0b24iLCJhcGkiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2dldFJlc3VsdCIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImdldFVzZXIiLCJlZGl0VXNlckluZm8iLCJfcmVmIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlZGl0VXNlckF2YXRhciIsIl9yZWYyIiwiYXZhdGFyIiwicG9zdENhcmQiLCJfcmVmMyIsImxpbmsiLCJyZW1vdmVDYXJkIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCIsImF1dGhvcml6YXRpb24iLCJwcm9maWxlIiwiZG9jdW1lbnQiLCJlZGl0QnRuIiwiYXZhdGFyQnRuIiwic2V0SW5mbyIsImRhdGEiLCJzZXRBdmF0YXIiLCJzcmMiLCJzZXRJbnB1dFZhbHVlcyIsImlucHV0TGlzdCIsImlucHV0VmFsdWVzIiwiZm9yRWFjaCIsInZhbHVlIiwiZ2V0SW5wdXRWYWx1ZXMiLCJjdXJyZW50TW9kYWwiLCJoYW5kZWxFc2NhcGUiLCJrZXkiLCJjbG9zZU1vZGFsIiwiaGFuZGVsT3V0c2lkZUNsaWNrIiwiY3VycmVudFRhcmdldCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwcm9maWxlRm9ybSIsInByb2ZpbGVJbnB1dExpc3QiLCJwcm9maWxlTW9kYWwiLCJhdmF0YXJNb2RhbCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JtcyIsInByb2ZpbGVTdWJtaXRCdG4iLCJhdmF0YXJGb3JtIiwiYXZhdGFyU3VibWl0QnRuIiwiYXZhdGFySW5wdXRMaXN0IiwicG9zdE1vZGFsIiwicG9zdEZvcm0iLCJwb3N0SW5wdXRMaXN0IiwiY3VycmVudENhcmQiLCJjdXJyZW50Q2FyZElkIiwicmVuZGVyQ2FyZCIsImRlbGV0ZU1vZGFsIiwiZGVsZXRlRm9ybSIsImNhbmNlbEJ0biIsImltYWdlTW9kYWwiLCJpbWFnZSIsImNhcHRpb24iLCJjYXJkVGVtcGxhdGUiLCJlbmFibGVDYXJkTGlrZSIsImxpa2VCdG4iLCJpc0xpa2VkIiwiY2FyZENvbnRhaW5lciIsImNhcmRFbGVtZW50Iiwic2VsZWN0b3IiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwiY2FyZElkIiwiX2lkIiwiZWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJhbHQiLCJsb2FkTW9kYWxJbWFnZSIsImNyZWF0ZUNhcmQiLCJjYXJkcyIsImNhcmQiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImhpZGVGb3JtSW5wdXRFcnJvcnMiLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=